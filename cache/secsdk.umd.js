/*!
* @byted/secsdk-janus v1.2.3
* Janus-Mini
* (c) 2021
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).secsdk={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t})),o=function(e){return e&&e.Math==Math&&e},i=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==n(t)&&t)||function(){return this}()||Function("return this")(),a=function(e){try{return!!e()}catch(t){return!0}},u=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,f={f:s&&!c.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:c},l=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,p=function(e){return h.call(e).slice(8,-1)},v="".split,d=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==p(e)?v.call(e,""):Object(e)}:Object,y=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return d(y(e))},m=function(e){return"object"===n(e)?null!==e:"function"==typeof e},w=function(e,t){if(!m(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!m(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,S=function(e,t){return b.call(e,t)},k=i.document,L=m(k)&&m(k.createElement),R=function(e){return L?k.createElement(e):{}},j=!u&&!a((function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a})),A=Object.getOwnPropertyDescriptor,E={f:u?A:function(e,t){if(e=g(e),t=w(t,!0),j)try{return A(e,t)}catch(r){}if(S(e,t))return l(!f.f.call(e,t),e[t])}},O=function(e){if(!m(e))throw TypeError(String(e)+" is not an object");return e},P=Object.defineProperty,T={f:u?P:function(e,t,r){if(O(e),t=w(t,!0),O(r),j)try{return P(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},q=u?function(e,t,r){return T.f(e,t,l(1,r))}:function(e,t,r){return e[t]=r,e},x=function(e,t){try{q(i,e,t)}catch(r){i[e]=t}return t},U=i["__core-js_shared__"]||x("__core-js_shared__",{}),M=Function.toString;"function"!=typeof U.inspectSource&&(U.inspectSource=function(e){return M.call(e)});var I,C,F,H=U.inspectSource,_=i.WeakMap,N="function"==typeof _&&/native code/.test(H(_)),B=r((function(e){(e.exports=function(e,t){return U[e]||(U[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),D=0,X=Math.random(),G=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++D+X).toString(36)},V=B("keys"),z=function(e){return V[e]||(V[e]=G(e))},W={},$=i.WeakMap;if(N){var J=U.state||(U.state=new $),Y=J.get,K=J.has,Z=J.set;I=function(e,t){return t.facade=e,Z.call(J,e,t),t},C=function(e){return Y.call(J,e)||{}},F=function(e){return K.call(J,e)}}else{var Q=z("state");W[Q]=!0,I=function(e,t){return t.facade=e,q(e,Q,t),t},C=function(e){return S(e,Q)?e[Q]:{}},F=function(e){return S(e,Q)}}var ee={set:I,get:C,has:F,enforce:function(e){return F(e)?C(e):I(e,{})},getterFor:function(e){return function(t){var r;if(!m(t)||(r=C(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},te=r((function(e){var t=ee.get,r=ee.enforce,n=String(String).split("String");(e.exports=function(e,t,o,a){var u,c=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof t||S(o,"name")||q(o,"name",t),(u=r(o)).source||(u.source=n.join("string"==typeof t?t:""))),e!==i?(c?!f&&e[t]&&(s=!0):delete e[t],s?e[t]=o:q(e,t,o)):s?e[t]=o:x(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||H(this)}))})),re=i,ne=function(e){return"function"==typeof e?e:void 0},oe=function(e,t){return arguments.length<2?ne(re[e])||ne(i[e]):re[e]&&re[e][t]||i[e]&&i[e][t]},ie=Math.ceil,ae=Math.floor,ue=function(e){return isNaN(e=+e)?0:(e>0?ae:ie)(e)},ce=Math.min,se=function(e){return e>0?ce(ue(e),9007199254740991):0},fe=Math.max,le=Math.min,he=function(e){return function(t,r,n){var o,i=g(t),a=se(i.length),u=function(e,t){var r=ue(e);return r<0?fe(r+t,0):le(r,t)}(n,a);if(e&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((e||u in i)&&i[u]===r)return e||u||0;return!e&&-1}},pe={includes:he(!0),indexOf:he(!1)},ve=pe.indexOf,de=function(e,t){var r,n=g(e),o=0,i=[];for(r in n)!S(W,r)&&S(n,r)&&i.push(r);for(;t.length>o;)S(n,r=t[o++])&&(~ve(i,r)||i.push(r));return i},ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ge=ye.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(e){return de(e,ge)}},we={f:Object.getOwnPropertySymbols},be=oe("Reflect","ownKeys")||function(e){var t=me.f(O(e)),r=we.f;return r?t.concat(r(e)):t},Se=function(e,t){for(var r=be(t),n=T.f,o=E.f,i=0;i<r.length;i++){var a=r[i];S(e,a)||n(e,a,o(t,a))}},ke=/#|\.prototype\./,Le=function(e,t){var r=je[Re(e)];return r==Ee||r!=Ae&&("function"==typeof t?a(t):!!t)},Re=Le.normalize=function(e){return String(e).replace(ke,".").toLowerCase()},je=Le.data={},Ae=Le.NATIVE="N",Ee=Le.POLYFILL="P",Oe=Le,Pe=E.f,Te=function(e,t){var r,o,a,u,c,s=e.target,f=e.global,l=e.stat;if(r=f?i:l?i[s]||x(s,{}):(i[s]||{}).prototype)for(o in t){if(u=t[o],a=e.noTargetGet?(c=Pe(r,o))&&c.value:r[o],!Oe(f?o:s+(l?".":"#")+o,e.forced)&&void 0!==a){if(n(u)===n(a))continue;Se(u,a)}(e.sham||a&&a.sham)&&q(u,"sham",!0),te(r,o,u,e)}},qe=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},xe=function(e,t,r){if(qe(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},Ue=function(e){return Object(y(e))},Me=Array.isArray||function(e){return"Array"==p(e)},Ie=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Ce=Ie&&!Symbol.sham&&"symbol"==n(Symbol.iterator),Fe=B("wks"),He=i.Symbol,_e=Ce?He:He&&He.withoutSetter||G,Ne=function(e){return S(Fe,e)||(Ie&&S(He,e)?Fe[e]=He[e]:Fe[e]=_e("Symbol."+e)),Fe[e]},Be=Ne("species"),De=function(e,t){var r;return Me(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Me(r.prototype)?m(r)&&null===(r=r[Be])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},Xe=[].push,Ge=function(e){var t=1==e,r=2==e,n=3==e,o=4==e,i=6==e,a=7==e,u=5==e||i;return function(c,s,f,l){for(var h,p,v=Ue(c),y=d(v),g=xe(s,f,3),m=se(y.length),w=0,b=l||De,S=t?b(c,m):r||a?b(c,0):void 0;m>w;w++)if((u||w in y)&&(p=g(h=y[w],w,v),e))if(t)S[w]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:Xe.call(S,h)}else switch(e){case 4:return!1;case 7:Xe.call(S,h)}return i?-1:n||o?o:S}},Ve={forEach:Ge(0),map:Ge(1),filter:Ge(2),some:Ge(3),every:Ge(4),find:Ge(5),findIndex:Ge(6),filterOut:Ge(7)},ze=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))},We=Object.defineProperty,$e={},Je=function(e){throw e},Ye=function(e,t){if(S($e,e))return $e[e];t||(t={});var r=[][e],n=!!S(t,"ACCESSORS")&&t.ACCESSORS,o=S(t,0)?t[0]:Je,i=S(t,1)?t[1]:void 0;return $e[e]=!!r&&!a((function(){if(n&&!u)return!0;var e={length:-1};n?We(e,1,{enumerable:!0,get:Je}):e[1]=1,r.call(e,o,i)}))},Ke=Ve.forEach,Ze=ze("forEach"),Qe=Ye("forEach"),et=Ze&&Qe?[].forEach:function(e){return Ke(this,e,arguments.length>1?arguments[1]:void 0)};Te({target:"Array",proto:!0,forced:[].forEach!=et},{forEach:et});var tt,rt=Object.keys||function(e){return de(e,ye)},nt=u?Object.defineProperties:function(e,t){O(e);for(var r,n=rt(t),o=n.length,i=0;o>i;)T.f(e,r=n[i++],t[r]);return e},ot=oe("document","documentElement"),it=z("IE_PROTO"),at=function(){},ut=function(e){return"<script>"+e+"<\/script>"},ct=function(){try{tt=document.domain&&new ActiveXObject("htmlfile")}catch(n){}var e,t;ct=tt?function(e){e.write(ut("")),e.close();var t=e.parentWindow.Object;return e=null,t}(tt):((t=R("iframe")).style.display="none",ot.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ut("document.F=Object")),e.close(),e.F);for(var r=ye.length;r--;)delete ct.prototype[ye[r]];return ct()};W[it]=!0;var st=Object.create||function(e,t){var r;return null!==e?(at.prototype=O(e),r=new at,at.prototype=null,r[it]=e):r=ct(),void 0===t?r:nt(r,t)},ft=Ne("unscopables"),lt=Array.prototype;null==lt[ft]&&T.f(lt,ft,{configurable:!0,value:st(null)});var ht=function(e){lt[ft][e]=!0},pt=pe.includes,vt=Ye("indexOf",{ACCESSORS:!0,1:0});Te({target:"Array",proto:!0,forced:!vt},{includes:function(e){return pt(this,e,arguments.length>1?arguments[1]:void 0)}}),ht("includes");var dt,yt,gt=oe("navigator","userAgent")||"",mt=i.process,wt=mt&&mt.versions,bt=wt&&wt.v8;bt?yt=(dt=bt.split("."))[0]+dt[1]:gt&&(!(dt=gt.match(/Edge\/(\d+)/))||dt[1]>=74)&&(dt=gt.match(/Chrome\/(\d+)/))&&(yt=dt[1]);var St=yt&&+yt,kt=Ne("species"),Lt=Ve.map,Rt=function(e){return St>=51||!a((function(){var t=[];return(t.constructor={})[kt]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}("map"),jt=Ye("map");Te({target:"Array",proto:!0,forced:!Rt||!jt},{map:function(e){return Lt(this,e,arguments.length>1?arguments[1]:void 0)}});var At=Ve.some,Et=ze("some"),Ot=Ye("some");Te({target:"Array",proto:!0,forced:!Et||!Ot},{some:function(e){return At(this,e,arguments.length>1?arguments[1]:void 0)}});var Pt=Object.assign,Tt=Object.defineProperty,qt=!Pt||a((function(){if(u&&1!==Pt({b:1},Pt(Tt({},"a",{enumerable:!0,get:function(){Tt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Pt({},e)[r]||"abcdefghijklmnopqrst"!=rt(Pt({},t)).join("")}))?function(e,t){for(var r=Ue(e),n=arguments.length,o=1,i=we.f,a=f.f;n>o;)for(var c,s=d(arguments[o++]),l=i?rt(s).concat(i(s)):rt(s),h=l.length,p=0;h>p;)c=l[p++],u&&!a.call(s,c)||(r[c]=s[c]);return r}:Pt;Te({target:"Object",stat:!0,forced:Object.assign!==qt},{assign:qt});var xt={};xt[Ne("toStringTag")]="z";var Ut="[object z]"===String(xt),Mt=Ne("toStringTag"),It="Arguments"==p(function(){return arguments}()),Ct=Ut?p:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),Mt))?r:It?p(t):"Object"==(n=p(t))&&"function"==typeof t.callee?"Arguments":n},Ft=Ut?{}.toString:function(){return"[object "+Ct(this)+"]"};Ut||te(Object.prototype,"toString",Ft,{unsafe:!0});var Ht=i.Promise,_t=function(e,t,r){for(var n in t)te(e,n,t[n],r);return e},Nt=T.f,Bt=Ne("toStringTag"),Dt=function(e,t,r){e&&!S(e=r?e:e.prototype,Bt)&&Nt(e,Bt,{configurable:!0,value:t})},Xt=Ne("species"),Gt=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},Vt={},zt=Ne("iterator"),Wt=Array.prototype,$t=function(e){return void 0!==e&&(Vt.Array===e||Wt[zt]===e)},Jt=Ne("iterator"),Yt=function(e){if(null!=e)return e[Jt]||e["@@iterator"]||Vt[Ct(e)]},Kt=function(e){var t=e.return;if(void 0!==t)return O(t.call(e)).value},Zt=function(e,t){this.stopped=e,this.result=t},Qt=function(e,t,r){var o,i,a,u,c,s,f,l=r&&r.that,h=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=xe(t,l,1+h+v),y=function(e){return o&&Kt(o),new Zt(!0,e)},g=function(e){return h?(O(e),v?d(e[0],e[1],y):d(e[0],e[1])):v?d(e,y):d(e)};if(p)o=e;else{if("function"!=typeof(i=Yt(e)))throw TypeError("Target is not iterable");if($t(i)){for(a=0,u=se(e.length);u>a;a++)if((c=g(e[a]))&&c instanceof Zt)return c;return new Zt(!1)}o=i.call(e)}for(s=o.next;!(f=s.call(o)).done;){try{c=g(f.value)}catch(m){throw Kt(o),m}if("object"==n(c)&&c&&c instanceof Zt)return c}return new Zt(!1)},er=Ne("iterator"),tr=!1;try{var rr=0,nr={next:function(){return{done:!!rr++}},return:function(){tr=!0}};nr[er]=function(){return this},Array.from(nr,(function(){throw 2}))}catch(wa){}var or,ir,ar,ur=Ne("species"),cr=function(e,t){var r,n=O(e).constructor;return void 0===n||null==(r=O(n)[ur])?t:qe(r)},sr=/(iphone|ipod|ipad).*applewebkit/i.test(gt),fr="process"==p(i.process),lr=i.location,hr=i.setImmediate,pr=i.clearImmediate,vr=i.process,dr=i.MessageChannel,yr=i.Dispatch,gr=0,mr={},wr=function(e){if(mr.hasOwnProperty(e)){var t=mr[e];delete mr[e],t()}},br=function(e){return function(){wr(e)}},Sr=function(e){wr(e.data)},kr=function(e){i.postMessage(e+"",lr.protocol+"//"+lr.host)};hr&&pr||(hr=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return mr[++gr]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},or(gr),gr},pr=function(e){delete mr[e]},fr?or=function(e){vr.nextTick(br(e))}:yr&&yr.now?or=function(e){yr.now(br(e))}:dr&&!sr?(ar=(ir=new dr).port2,ir.port1.onmessage=Sr,or=xe(ar.postMessage,ar,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&lr&&"file:"!==lr.protocol&&!a(kr)?(or=kr,i.addEventListener("message",Sr,!1)):or="onreadystatechange"in R("script")?function(e){ot.appendChild(R("script")).onreadystatechange=function(){ot.removeChild(this),wr(e)}}:function(e){setTimeout(br(e),0)});var Lr,Rr,jr,Ar,Er,Or,Pr,Tr,qr={set:hr,clear:pr},xr=/web0s(?!.*chrome)/i.test(gt),Ur=E.f,Mr=qr.set,Ir=i.MutationObserver||i.WebKitMutationObserver,Cr=i.document,Fr=i.process,Hr=i.Promise,_r=Ur(i,"queueMicrotask"),Nr=_r&&_r.value;Nr||(Lr=function(){var e,t;for(fr&&(e=Fr.domain)&&e.exit();Rr;){t=Rr.fn,Rr=Rr.next;try{t()}catch(wa){throw Rr?Ar():jr=void 0,wa}}jr=void 0,e&&e.enter()},sr||fr||xr||!Ir||!Cr?Hr&&Hr.resolve?(Pr=Hr.resolve(void 0),Tr=Pr.then,Ar=function(){Tr.call(Pr,Lr)}):Ar=fr?function(){Fr.nextTick(Lr)}:function(){Mr.call(i,Lr)}:(Er=!0,Or=Cr.createTextNode(""),new Ir(Lr).observe(Or,{characterData:!0}),Ar=function(){Or.data=Er=!Er}));var Br,Dr,Xr,Gr,Vr=Nr||function(e){var t={fn:e,next:void 0};jr&&(jr.next=t),Rr||(Rr=t,Ar()),jr=t},zr=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=qe(t),this.reject=qe(r)},Wr={f:function(e){return new zr(e)}},$r=function(e,t){if(O(e),m(t)&&t.constructor===e)return t;var r=Wr.f(e);return(0,r.resolve)(t),r.promise},Jr=function(e){try{return{error:!1,value:e()}}catch(wa){return{error:!0,value:wa}}},Yr=qr.set,Kr=Ne("species"),Zr="Promise",Qr=ee.get,en=ee.set,tn=ee.getterFor(Zr),rn=Ht,nn=i.TypeError,on=i.document,an=i.process,un=oe("fetch"),cn=Wr.f,sn=cn,fn=!!(on&&on.createEvent&&i.dispatchEvent),ln="function"==typeof PromiseRejectionEvent,hn=Oe(Zr,(function(){if(!(H(rn)!==String(rn))){if(66===St)return!0;if(!fr&&!ln)return!0}if(St>=51&&/native code/.test(rn))return!1;var e=rn.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Kr]=t,!(e.then((function(){}))instanceof t)})),pn=hn||!function(e,t){if(!t&&!tr)return!1;var r=!1;try{var n={};n[er]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(wa){}return r}((function(e){rn.all(e).catch((function(){}))})),vn=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},dn=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;Vr((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,u,c,s=r[i++],f=o?s.ok:s.fail,l=s.resolve,h=s.reject,p=s.domain;try{f?(o||(2===e.rejection&&wn(e),e.rejection=1),!0===f?a=n:(p&&p.enter(),a=f(n),p&&(p.exit(),c=!0)),a===s.promise?h(nn("Promise-chain cycle")):(u=vn(a))?u.call(a,l,h):l(a)):h(n)}catch(wa){p&&!c&&p.exit(),h(wa)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&gn(e)}))}},yn=function(e,t,r){var n,o;fn?((n=on.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),i.dispatchEvent(n)):n={promise:t,reason:r},!ln&&(o=i["on"+e])?o(n):"unhandledrejection"===e&&function(e,t){var r=i.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}("Unhandled promise rejection",r)},gn=function(e){Yr.call(i,(function(){var t,r=e.facade,n=e.value;if(mn(e)&&(t=Jr((function(){fr?an.emit("unhandledRejection",n,r):yn("unhandledrejection",r,n)})),e.rejection=fr||mn(e)?2:1,t.error))throw t.value}))},mn=function(e){return 1!==e.rejection&&!e.parent},wn=function(e){Yr.call(i,(function(){var t=e.facade;fr?an.emit("rejectionHandled",t):yn("rejectionhandled",t,e.value)}))},bn=function(e,t,r){return function(n){e(t,n,r)}},Sn=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,dn(e,!0))},kn=function e(t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===r)throw nn("Promise can't be resolved itself");var o=vn(r);o?Vr((function(){var n={done:!1};try{o.call(r,bn(e,n,t),bn(Sn,n,t))}catch(wa){Sn(n,wa,t)}})):(t.value=r,t.state=1,dn(t,!1))}catch(wa){Sn({done:!1},wa,t)}}};hn&&(rn=function(e){Gt(this,rn,Zr),qe(e),Br.call(this);var t=Qr(this);try{e(bn(kn,t),bn(Sn,t))}catch(wa){Sn(t,wa)}},(Br=function(e){en(this,{type:Zr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_t(rn.prototype,{then:function(e,t){var r=tn(this),n=cn(cr(this,rn));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=fr?an.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&dn(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Dr=function(){var e=new Br,t=Qr(e);this.promise=e,this.resolve=bn(kn,t),this.reject=bn(Sn,t)},Wr.f=cn=function(e){return e===rn||e===Xr?new Dr(e):sn(e)},"function"==typeof Ht&&(Gr=Ht.prototype.then,te(Ht.prototype,"then",(function(e,t){var r=this;return new rn((function(e,t){Gr.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof un&&Te({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return $r(rn,un.apply(i,arguments))}}))),Te({global:!0,wrap:!0,forced:hn},{Promise:rn}),Dt(rn,Zr,!1),function(e){var t=oe(e),r=T.f;u&&t&&!t[Xt]&&r(t,Xt,{configurable:!0,get:function(){return this}})}(Zr),Xr=oe(Zr),Te({target:Zr,stat:!0,forced:hn},{reject:function(e){var t=cn(this);return t.reject.call(void 0,e),t.promise}}),Te({target:Zr,stat:!0,forced:hn},{resolve:function(e){return $r(this,e)}}),Te({target:Zr,stat:!0,forced:pn},{all:function(e){var t=this,r=cn(t),n=r.resolve,o=r.reject,i=Jr((function(){var r=qe(t.resolve),i=[],a=0,u=1;Qt(e,(function(e){var c=a++,s=!1;i.push(void 0),u++,r.call(t,e).then((function(e){s||(s=!0,i[c]=e,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=cn(t),n=r.reject,o=Jr((function(){var o=qe(t.resolve);Qt(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var Ln=!!Ht&&a((function(){Ht.prototype.finally.call({then:function(){}},(function(){}))}));Te({target:"Promise",proto:!0,real:!0,forced:Ln},{finally:function(e){var t=cr(this,oe("Promise")),r="function"==typeof e;return this.then(r?function(r){return $r(t,e()).then((function(){return r}))}:e,r?function(r){return $r(t,e()).then((function(){throw r}))}:e)}}),"function"!=typeof Ht||Ht.prototype.finally||te(Ht.prototype,"finally",oe("Promise").prototype.finally);var Rn,jn,An,En=function(e){return function(t,r){var n,o,i=String(y(t)),a=ue(r),u=i.length;return a<0||a>=u?e?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):n:e?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},On={codeAt:En(!1),charAt:En(!0)},Pn=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Tn=z("IE_PROTO"),qn=Object.prototype,xn=Pn?Object.getPrototypeOf:function(e){return e=Ue(e),S(e,Tn)?e[Tn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?qn:null},Un=Ne("iterator"),Mn=!1;[].keys&&("next"in(An=[].keys())?(jn=xn(xn(An)))!==Object.prototype&&(Rn=jn):Mn=!0),null==Rn&&(Rn={}),S(Rn,Un)||q(Rn,Un,(function(){return this}));var In={IteratorPrototype:Rn,BUGGY_SAFARI_ITERATORS:Mn},Cn=In.IteratorPrototype,Fn=function(){return this},Hn=function(e,t,r){var n=t+" Iterator";return e.prototype=st(Cn,{next:l(1,r)}),Dt(e,n,!1),Vt[n]=Fn,e},_n=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(wa){}return function(r,n){return O(r),function(e){if(!m(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),Nn=In.IteratorPrototype,Bn=In.BUGGY_SAFARI_ITERATORS,Dn=Ne("iterator"),Xn=function(){return this},Gn=function(e,t,r,n,o,i,a){Hn(r,t,n);var u,c,s,f=function(e){if(e===o&&d)return d;if(!Bn&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},l=t+" Iterator",h=!1,p=e.prototype,v=p[Dn]||p["@@iterator"]||o&&p[o],d=!Bn&&v||f(o),y="Array"==t&&p.entries||v;if(y&&(u=xn(y.call(new e)),Nn!==Object.prototype&&u.next&&(xn(u)!==Nn&&(_n?_n(u,Nn):"function"!=typeof u[Dn]&&q(u,Dn,Xn)),Dt(u,l,!0))),"values"==o&&v&&"values"!==v.name&&(h=!0,d=function(){return v.call(this)}),p[Dn]!==d&&q(p,Dn,d),Vt[t]=d,o)if(c={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(s in c)(Bn||h||!(s in p))&&te(p,s,c[s]);else Te({target:t,proto:!0,forced:Bn||h},c);return c},Vn=On.charAt,zn=ee.set,Wn=ee.getterFor("String Iterator");Gn(String,"String",(function(e){zn(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=Wn(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=Vn(r,n),t.index+=e.length,{value:e,done:!1})}));var $n=function(e,t){var r=this;if(!(r instanceof $n))return new $n(e,t);_n&&(r=_n(new Error(void 0),xn(r))),void 0!==t&&q(r,"message",String(t));var n=[];return Qt(e,n.push,{that:n}),q(r,"errors",n),r};$n.prototype=st(Error.prototype,{constructor:l(5,$n),message:l(5,""),name:l(5,"AggregateError")}),Te({global:!0},{AggregateError:$n}),Te({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=Wr.f(t),n=r.resolve,o=r.reject,i=Jr((function(){var r=qe(t.resolve),o=[],i=0,a=1;Qt(e,(function(e){var u=i++,c=!1;o.push(void 0),a++,r.call(t,e).then((function(e){c||(c=!0,o[u]={status:"fulfilled",value:e},--a||n(o))}),(function(e){c||(c=!0,o[u]={status:"rejected",reason:e},--a||n(o))}))})),--a||n(o)}));return i.error&&o(i.value),r.promise}});Te({target:"Promise",stat:!0},{any:function(e){var t=this,r=Wr.f(t),n=r.resolve,o=r.reject,i=Jr((function(){var r=qe(t.resolve),i=[],a=0,u=1,c=!1;Qt(e,(function(e){var s=a++,f=!1;i.push(void 0),u++,r.call(t,e).then((function(e){f||c||(c=!0,n(e))}),(function(e){f||c||(f=!0,i[s]=e,--u||o(new(oe("AggregateError"))(i,"No one promise resolved")))}))})),--u||o(new(oe("AggregateError"))(i,"No one promise resolved"))}));return i.error&&o(i.value),r.promise}}),Te({target:"Promise",stat:!0},{try:function(e){var t=Wr.f(this),r=Jr(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var Jn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Yn=ee.set,Kn=ee.getterFor("Array Iterator"),Zn=Gn(Array,"Array",(function(e,t){Yn(this,{type:"Array Iterator",target:g(e),index:0,kind:t})}),(function(){var e=Kn(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");Vt.Arguments=Vt.Array,ht("keys"),ht("values"),ht("entries");var Qn=Ne("iterator"),eo=Ne("toStringTag"),to=Zn.values;for(var ro in Jn){var no=i[ro],oo=no&&no.prototype;if(oo){if(oo[Qn]!==to)try{q(oo,Qn,to)}catch(wa){oo[Qn]=to}if(oo[eo]||q(oo,eo,ro),Jn[ro])for(var io in Zn)if(oo[io]!==Zn[io])try{q(oo,io,Zn[io])}catch(wa){oo[io]=Zn[io]}}}var ao=Ne("iterator"),uo=!a((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ao]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),co=function(e,t,r,n){try{return n?t(O(r)[0],r[1]):t(r)}catch(wa){throw Kt(e),wa}},so=function(e,t,r){var n=w(t);n in e?T.f(e,n,l(0,r)):e[n]=r},fo=function(e){var t,r,n,o,i,a,u=Ue(e),c="function"==typeof this?this:Array,s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,h=Yt(u),p=0;if(l&&(f=xe(f,s>2?arguments[2]:void 0,2)),null==h||c==Array&&$t(h))for(r=new c(t=se(u.length));t>p;p++)a=l?f(u[p],p):u[p],so(r,p,a);else for(i=(o=h.call(u)).next,r=new c;!(n=i.call(o)).done;p++)a=l?co(o,f,[n.value,p],!0):n.value,so(r,p,a);return r.length=p,r},lo=/[^\0-\u007E]/,ho=/[.\u3002\uFF0E\uFF61]/g,po="Overflow: input needs wider integers to process",vo=Math.floor,yo=String.fromCharCode,go=function(e){return e+22+75*(e<26)},mo=function(e,t,r){var n=0;for(e=r?vo(e/700):e>>1,e+=vo(e/t);e>455;n+=36)e=vo(e/35);return vo(n+36*e/(e+38))},wo=function(e){var t,r,n=[],o=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,i=128,a=0,u=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(yo(r));var c=n.length,s=c;for(c&&n.push("-");s<o;){var f=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=i&&r<f&&(f=r);var l=s+1;if(f-i>vo((2147483647-a)/l))throw RangeError(po);for(a+=(f-i)*l,i=f,t=0;t<e.length;t++){if((r=e[t])<i&&++a>2147483647)throw RangeError(po);if(r==i){for(var h=a,p=36;;p+=36){var v=p<=u?1:p>=u+26?26:p-u;if(h<v)break;var d=h-v,y=36-v;n.push(yo(go(v+d%y))),h=vo(d/y)}n.push(yo(go(h))),u=mo(a,l,s==c),a=0,++s}}++a,++i}return n.join("")},bo=function(e){var t=Yt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return O(t.call(e))},So=oe("fetch"),ko=oe("Headers"),Lo=Ne("iterator"),Ro=ee.set,jo=ee.getterFor("URLSearchParams"),Ao=ee.getterFor("URLSearchParamsIterator"),Eo=/\+/g,Oo=Array(4),Po=function(e){return Oo[e-1]||(Oo[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},To=function(e){try{return decodeURIComponent(e)}catch(wa){return e}},qo=function(e){var t=e.replace(Eo," "),r=4;try{return decodeURIComponent(t)}catch(wa){for(;r;)t=t.replace(Po(r--),To);return t}},xo=/[!'()~]|%20/g,Uo={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Mo=function(e){return Uo[e]},Io=function(e){return encodeURIComponent(e).replace(xo,Mo)},Co=function(e,t){if(t)for(var r,n,o=t.split("&"),i=0;i<o.length;)(r=o[i++]).length&&(n=r.split("="),e.push({key:qo(n.shift()),value:qo(n.join("="))}))},Fo=function(e){this.entries.length=0,Co(this.entries,e)},Ho=function(e,t){if(e<t)throw TypeError("Not enough arguments")},_o=Hn((function(e,t){Ro(this,{type:"URLSearchParamsIterator",iterator:bo(jo(e).entries),kind:t})}),"Iterator",(function(){var e=Ao(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),No=function(){Gt(this,No,"URLSearchParams");var e,t,r,n,o,i,a,u,c,s=arguments.length>0?arguments[0]:void 0,f=this,l=[];if(Ro(f,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:Fo}),void 0!==s)if(m(s))if("function"==typeof(e=Yt(s)))for(r=(t=e.call(s)).next;!(n=r.call(t)).done;){if((a=(i=(o=bo(O(n.value))).next).call(o)).done||(u=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");l.push({key:a.value+"",value:u.value+""})}else for(c in s)S(s,c)&&l.push({key:c,value:s[c]+""});else Co(l,"string"==typeof s?"?"===s.charAt(0)?s.slice(1):s:s+"")},Bo=No.prototype;_t(Bo,{append:function(e,t){Ho(arguments.length,2);var r=jo(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){Ho(arguments.length,1);for(var t=jo(this),r=t.entries,n=e+"",o=0;o<r.length;)r[o].key===n?r.splice(o,1):o++;t.updateURL()},get:function(e){Ho(arguments.length,1);for(var t=jo(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){Ho(arguments.length,1);for(var t=jo(this).entries,r=e+"",n=[],o=0;o<t.length;o++)t[o].key===r&&n.push(t[o].value);return n},has:function(e){Ho(arguments.length,1);for(var t=jo(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){Ho(arguments.length,1);for(var r,n=jo(this),o=n.entries,i=!1,a=e+"",u=t+"",c=0;c<o.length;c++)(r=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,r.value=u));i||o.push({key:a,value:u}),n.updateURL()},sort:function(){var e,t,r,n=jo(this),o=n.entries,i=o.slice();for(o.length=0,r=0;r<i.length;r++){for(e=i[r],t=0;t<r;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===r&&o.push(e)}n.updateURL()},forEach:function(e){for(var t,r=jo(this).entries,n=xe(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new _o(this,"keys")},values:function(){return new _o(this,"values")},entries:function(){return new _o(this,"entries")}},{enumerable:!0}),te(Bo,Lo,Bo.entries),te(Bo,"toString",(function(){for(var e,t=jo(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(Io(e.key)+"="+Io(e.value));return r.join("&")}),{enumerable:!0}),Dt(No,"URLSearchParams"),Te({global:!0,forced:!uo},{URLSearchParams:No}),uo||"function"!=typeof So||"function"!=typeof ko||Te({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,n,o=[e];return arguments.length>1&&(m(t=arguments[1])&&(r=t.body,"URLSearchParams"===Ct(r)&&((n=t.headers?new ko(t.headers):new ko).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=st(t,{body:l(0,String(r)),headers:l(0,n)}))),o.push(t)),So.apply(this,o)}});var Do,Xo={URLSearchParams:No,getState:jo},Go=On.codeAt,Vo=i.URL,zo=Xo.URLSearchParams,Wo=Xo.getState,$o=ee.set,Jo=ee.getterFor("URL"),Yo=Math.floor,Ko=Math.pow,Zo=/[A-Za-z]/,Qo=/[\d+-.A-Za-z]/,ei=/\d/,ti=/^(0x|0X)/,ri=/^[0-7]+$/,ni=/^\d+$/,oi=/^[\dA-Fa-f]+$/,ii=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ai=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ui=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ci=/[\u0009\u000A\u000D]/g,si=function(e,t){var r,n,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(r=li(t.slice(1,-1))))return"Invalid host";e.host=r}else if(wi(e)){if(t=function(e){var t,r,n=[],o=e.toLowerCase().replace(ho,".").split(".");for(t=0;t<o.length;t++)r=o[t],n.push(lo.test(r)?"xn--"+wo(r):r);return n.join(".")}(t),ii.test(t))return"Invalid host";if(null===(r=fi(t)))return"Invalid host";e.host=r}else{if(ai.test(t))return"Invalid host";for(r="",n=fo(t),o=0;o<n.length;o++)r+=gi(n[o],pi);e.host=r}},fi=function(e){var t,r,n,o,i,a,u,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(o=c[n]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=ti.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?ni:8==i?ri:oi).test(o))return e;a=parseInt(o,i)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=Ko(256,5-t))return null}else if(a>255)return null;for(u=r.pop(),n=0;n<r.length;n++)u+=r[n]*Ko(256,3-n);return u},li=function(e){var t,r,n,o,i,a,u,c=[0,0,0,0,0,0,0,0],s=0,f=null,l=0,h=function(){return e.charAt(l)};if(":"==h()){if(":"!=e.charAt(1))return;l+=2,f=++s}for(;h();){if(8==s)return;if(":"!=h()){for(t=r=0;r<4&&oi.test(h());)t=16*t+parseInt(h(),16),l++,r++;if("."==h()){if(0==r)return;if(l-=r,s>6)return;for(n=0;h();){if(o=null,n>0){if(!("."==h()&&n<4))return;l++}if(!ei.test(h()))return;for(;ei.test(h());){if(i=parseInt(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}c[s]=256*c[s]+o,2!=++n&&4!=n||s++}if(4!=n)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;c[s++]=t}else{if(null!==f)return;l++,f=++s}}if(null!==f)for(a=s-f,s=7;0!=s&&a>0;)u=c[s],c[s--]=c[f+a-1],c[f+--a]=u;else if(8!=s)return;return c},hi=function(e){var t,r,o,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=Yo(e/256);return t.join(".")}if("object"==n(e)){for(t="",o=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(t=n,r=o),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),o===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},pi={},vi=qt({},pi,{" ":1,'"':1,"<":1,">":1,"`":1}),di=qt({},vi,{"#":1,"?":1,"{":1,"}":1}),yi=qt({},di,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),gi=function(e,t){var r=Go(e,0);return r>32&&r<127&&!S(t,e)?e:encodeURIComponent(e)},mi={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wi=function(e){return S(mi,e.scheme)},bi=function(e){return""!=e.username||""!=e.password},Si=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ki=function(e,t){var r;return 2==e.length&&Zo.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},Li=function(e){var t;return e.length>1&&ki(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Ri=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&ki(t[0],!0)||t.pop()},ji=function(e){return"."===e||"%2e"===e.toLowerCase()},Ai={},Ei={},Oi={},Pi={},Ti={},qi={},xi={},Ui={},Mi={},Ii={},Ci={},Fi={},Hi={},_i={},Ni={},Bi={},Di={},Xi={},Gi={},Vi={},zi={},Wi=function(e,t,r,n){var o,i,a,u,c,s=r||Ai,f=0,l="",h=!1,p=!1,v=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(ui,"")),t=t.replace(ci,""),o=fo(t);f<=o.length;){switch(i=o[f],s){case Ai:if(!i||!Zo.test(i)){if(r)return"Invalid scheme";s=Oi;continue}l+=i.toLowerCase(),s=Ei;break;case Ei:if(i&&(Qo.test(i)||"+"==i||"-"==i||"."==i))l+=i.toLowerCase();else{if(":"!=i){if(r)return"Invalid scheme";l="",s=Oi,f=0;continue}if(r&&(wi(e)!=S(mi,l)||"file"==l&&(bi(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,r)return void(wi(e)&&mi[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?s=_i:wi(e)&&n&&n.scheme==e.scheme?s=Pi:wi(e)?s=Ui:"/"==o[f+1]?(s=Ti,f++):(e.cannotBeABaseURL=!0,e.path.push(""),s=Gi)}break;case Oi:if(!n||n.cannotBeABaseURL&&"#"!=i)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==i){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,s=zi;break}s="file"==n.scheme?_i:qi;continue;case Pi:if("/"!=i||"/"!=o[f+1]){s=qi;continue}s=Mi,f++;break;case Ti:if("/"==i){s=Ii;break}s=Xi;continue;case qi:if(e.scheme=n.scheme,i==Do)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==i||"\\"==i&&wi(e))s=xi;else if("?"==i)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",s=Vi;else{if("#"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),s=Xi;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",s=zi}break;case xi:if(!wi(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,s=Xi;continue}s=Ii}else s=Mi;break;case Ui:if(s=Mi,"/"!=i||"/"!=l.charAt(f+1))continue;f++;break;case Mi:if("/"!=i&&"\\"!=i){s=Ii;continue}break;case Ii:if("@"==i){h&&(l="%40"+l),h=!0,a=fo(l);for(var d=0;d<a.length;d++){var y=a[d];if(":"!=y||v){var g=gi(y,yi);v?e.password+=g:e.username+=g}else v=!0}l=""}else if(i==Do||"/"==i||"?"==i||"#"==i||"\\"==i&&wi(e)){if(h&&""==l)return"Invalid authority";f-=fo(l).length+1,l="",s=Ci}else l+=i;break;case Ci:case Fi:if(r&&"file"==e.scheme){s=Bi;continue}if(":"!=i||p){if(i==Do||"/"==i||"?"==i||"#"==i||"\\"==i&&wi(e)){if(wi(e)&&""==l)return"Invalid host";if(r&&""==l&&(bi(e)||null!==e.port))return;if(u=si(e,l))return u;if(l="",s=Di,r)return;continue}"["==i?p=!0:"]"==i&&(p=!1),l+=i}else{if(""==l)return"Invalid host";if(u=si(e,l))return u;if(l="",s=Hi,r==Fi)return}break;case Hi:if(!ei.test(i)){if(i==Do||"/"==i||"?"==i||"#"==i||"\\"==i&&wi(e)||r){if(""!=l){var m=parseInt(l,10);if(m>65535)return"Invalid port";e.port=wi(e)&&m===mi[e.scheme]?null:m,l=""}if(r)return;s=Di;continue}return"Invalid port"}l+=i;break;case _i:if(e.scheme="file","/"==i||"\\"==i)s=Ni;else{if(!n||"file"!=n.scheme){s=Xi;continue}if(i==Do)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==i)e.host=n.host,e.path=n.path.slice(),e.query="",s=Vi;else{if("#"!=i){Li(o.slice(f).join(""))||(e.host=n.host,e.path=n.path.slice(),Ri(e)),s=Xi;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",s=zi}}break;case Ni:if("/"==i||"\\"==i){s=Bi;break}n&&"file"==n.scheme&&!Li(o.slice(f).join(""))&&(ki(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),s=Xi;continue;case Bi:if(i==Do||"/"==i||"\\"==i||"?"==i||"#"==i){if(!r&&ki(l))s=Xi;else if(""==l){if(e.host="",r)return;s=Di}else{if(u=si(e,l))return u;if("localhost"==e.host&&(e.host=""),r)return;l="",s=Di}continue}l+=i;break;case Di:if(wi(e)){if(s=Xi,"/"!=i&&"\\"!=i)continue}else if(r||"?"!=i)if(r||"#"!=i){if(i!=Do&&(s=Xi,"/"!=i))continue}else e.fragment="",s=zi;else e.query="",s=Vi;break;case Xi:if(i==Do||"/"==i||"\\"==i&&wi(e)||!r&&("?"==i||"#"==i)){if(".."===(c=(c=l).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(Ri(e),"/"==i||"\\"==i&&wi(e)||e.path.push("")):ji(l)?"/"==i||"\\"==i&&wi(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ki(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(i==Do||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",s=Vi):"#"==i&&(e.fragment="",s=zi)}else l+=gi(i,di);break;case Gi:"?"==i?(e.query="",s=Vi):"#"==i?(e.fragment="",s=zi):i!=Do&&(e.path[0]+=gi(i,pi));break;case Vi:r||"#"!=i?i!=Do&&("'"==i&&wi(e)?e.query+="%27":e.query+="#"==i?"%23":gi(i,pi)):(e.fragment="",s=zi);break;case zi:i!=Do&&(e.fragment+=gi(i,vi))}f++}},$i=function(e){var t,r,n=Gt(this,$i,"URL"),o=arguments.length>1?arguments[1]:void 0,i=String(e),a=$o(n,{type:"URL"});if(void 0!==o)if(o instanceof $i)t=Jo(o);else if(r=Wi(t={},String(o)))throw TypeError(r);if(r=Wi(a,i,null,t))throw TypeError(r);var c=a.searchParams=new zo,s=Wo(c);s.updateSearchParams(a.query),s.updateURL=function(){a.query=String(c)||null},u||(n.href=Yi.call(n),n.origin=Ki.call(n),n.protocol=Zi.call(n),n.username=Qi.call(n),n.password=ea.call(n),n.host=ta.call(n),n.hostname=ra.call(n),n.port=na.call(n),n.pathname=oa.call(n),n.search=ia.call(n),n.searchParams=aa.call(n),n.hash=ua.call(n))},Ji=$i.prototype,Yi=function(){var e=Jo(this),t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,u=e.query,c=e.fragment,s=t+":";return null!==o?(s+="//",bi(e)&&(s+=r+(n?":"+n:"")+"@"),s+=hi(o),null!==i&&(s+=":"+i)):"file"==t&&(s+="//"),s+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==u&&(s+="?"+u),null!==c&&(s+="#"+c),s},Ki=function(){var e=Jo(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(wa){return"null"}return"file"!=t&&wi(e)?t+"://"+hi(e.host)+(null!==r?":"+r:""):"null"},Zi=function(){return Jo(this).scheme+":"},Qi=function(){return Jo(this).username},ea=function(){return Jo(this).password},ta=function(){var e=Jo(this),t=e.host,r=e.port;return null===t?"":null===r?hi(t):hi(t)+":"+r},ra=function(){var e=Jo(this).host;return null===e?"":hi(e)},na=function(){var e=Jo(this).port;return null===e?"":String(e)},oa=function(){var e=Jo(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ia=function(){var e=Jo(this).query;return e?"?"+e:""},aa=function(){return Jo(this).searchParams},ua=function(){var e=Jo(this).fragment;return e?"#"+e:""},ca=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(u&&nt(Ji,{href:ca(Yi,(function(e){var t=Jo(this),r=String(e),n=Wi(t,r);if(n)throw TypeError(n);Wo(t.searchParams).updateSearchParams(t.query)})),origin:ca(Ki),protocol:ca(Zi,(function(e){var t=Jo(this);Wi(t,String(e)+":",Ai)})),username:ca(Qi,(function(e){var t=Jo(this),r=fo(String(e));if(!Si(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=gi(r[n],yi)}})),password:ca(ea,(function(e){var t=Jo(this),r=fo(String(e));if(!Si(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=gi(r[n],yi)}})),host:ca(ta,(function(e){var t=Jo(this);t.cannotBeABaseURL||Wi(t,String(e),Ci)})),hostname:ca(ra,(function(e){var t=Jo(this);t.cannotBeABaseURL||Wi(t,String(e),Fi)})),port:ca(na,(function(e){var t=Jo(this);Si(t)||(""==(e=String(e))?t.port=null:Wi(t,e,Hi))})),pathname:ca(oa,(function(e){var t=Jo(this);t.cannotBeABaseURL||(t.path=[],Wi(t,e+"",Di))})),search:ca(ia,(function(e){var t=Jo(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Wi(t,e,Vi)),Wo(t.searchParams).updateSearchParams(t.query)})),searchParams:ca(aa),hash:ca(ua,(function(e){var t=Jo(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Wi(t,e,zi)):t.fragment=null}))}),te(Ji,"toJSON",(function(){return Yi.call(this)}),{enumerable:!0}),te(Ji,"toString",(function(){return Yi.call(this)}),{enumerable:!0}),Vo){var sa=Vo.createObjectURL,fa=Vo.revokeObjectURL;sa&&te($i,"createObjectURL",(function(e){return sa.apply(Vo,arguments)})),fa&&te($i,"revokeObjectURL",(function(e){return fa.apply(Vo,arguments)}))}Dt($i,"URL"),Te({global:!0,forced:!uo,sham:!u},{URL:$i}),Te({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var la=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function ha(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pa=function(e,t,r){return t&&ha(e.prototype,t),r&&ha(e,r),e},va="fetch"in window,da="Request"in window,ya="Headers"in window,ga={POST:"*",PUT:"*",PATCH:"*",DELETE:"*"},ma=new(function(){function e(){la(this,e),this.tokenFetchPath="/secsdk_csrf_token",this.tokenHeaderName="x-secsdk-csrf-token",this.secsdkVersionHeaderName="x-secsdk-csrf-version",this.tokenFetchTimeout=1e4,this.nativeXMLHttpRequestOpen=window.XMLHttpRequest.prototype.open,this.nativeXMLHttpRequestSend=window.XMLHttpRequest.prototype.send,this.nativeXMLHttpRequestSetRequestHeader=window.XMLHttpRequest.prototype.setRequestHeader,this.nativeFetch=window.fetch,this.tokenMap={},this.protectionConfig={},this.secsdkVersion="1.2.3",this.monkeyPatchXMLHttpRequest(),this.monkeyPatchFetch()}return pa(e,[{key:"setProtectedHost",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;this.protectionConfig={},"string"==typeof t?this.protectionConfig[t]=Object.assign({},ga):Array.isArray(t)?t.forEach((function(t){e.protectionConfig[t]=Object.assign({},ga)})):"[object Object]"===Object.prototype.toString.call(t)&&Object.keys(t).forEach((function(r){e.protectionConfig[r]=Object.assign({},ga);var n=t[r];"[object Object]"===Object.prototype.toString.call(n)&&Object.keys(n).forEach((function(t){e.protectionConfig[r][t.toUpperCase()]=n[t]}))})),Object.keys(this.protectionConfig).forEach((function(t){return e.fetchToken(t)}))}},{key:"fetchToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;return Array.isArray(t)?Promise.all(t.map((function(t){return e.fetchToken(t)}))):(this.tokenMap[t]||(this.tokenMap[t]=this.fetchTokenFromServer(t).then((function(r){return e.tokenMap[t]=r,r}))),Promise.resolve(this.tokenMap[t]).then((function(r){return r.expiredAt<Date.now()?(delete e.tokenMap[t],e.fetchToken(t)):r})))}},{key:"fetchTokenFromLocal",value:function(e){var t=this.tokenMap[e];return!t||t instanceof Promise?"DOWNGRADE":t.value}},{key:"fetchTokenFromServer",value:function(e){var t=this;return new Promise((function(r){var n=new XMLHttpRequest,o={value:"DOWNGRADE",expiredAt:Date.now()+6e4};n.addEventListener("load",(function(){if(200!==n.status)return console.error(new Error("Failed to fetch csrf token: host=".concat(e," status=").concat(n.status," statusText=").concat(n.statusText))),void r(o);var t;try{t=JSON.parse(n.responseText)}catch(a){return console.error(new Error("Failed to parse csrf token: host=".concat(e," responseText=").concat(n.responseText," error=").concat(a.message))),void r(o)}if(0!==t.status_code)return console.error(new Error("Failed to fetch csrf token: host=".concat(e," status_code=").concat(t.status_code," message=").concat(t.message))),void r(o);if(!t.data||!t.data.token)return console.error(new Error("Failed to fetch csrf token, empty token: host=".concat(e," data=").concat(t.data))),void r(o);var i=t.data.max_age||864e5;r({value:t.data.token,expiredAt:Date.now()+i})})),n.addEventListener("error",(function(){console.error(new Error("Failed to fetch csrf token: host=".concat(e," error=network request failed"))),r(o)})),n.addEventListener("abort",(function(){console.error(new Error("Failed to fetch csrf token: host=".concat(e," error=network request aborted"))),r(o)})),n.addEventListener("timeout",(function(){console.error(new Error("Failed to fetch csrf token: host=".concat(e," error=timeout"))),r(o)})),t.nativeXMLHttpRequestOpen.call(n,"GET","".concat(window.location.protocol,"//").concat(e).concat(t.tokenFetchPath)),n.withCredentials=!0,t.nativeXMLHttpRequestSetRequestHeader.call(n,t.secsdkVersionHeaderName,t.secsdkVersion),n.timeout=t.tokenFetchTimeout,t.nativeXMLHttpRequestSend.call(n)}))}},{key:"shouldProtectRequest",value:function(e,t,r){t=t.toUpperCase();var n=this.protectionConfig;if(!n[e])return!1;if(!n[e][t])return!1;var o=n[e][t];return o instanceof RegExp?o.test(r):Array.isArray(o)?o.some((function(e){return e instanceof RegExp?e.test(r):e===r})):"*"===o||o===r}},{key:"monkeyPatchXMLHttpRequest",value:function(){var e=this;XMLHttpRequest.prototype.open=function(){this.openArgs=arguments,e.nativeXMLHttpRequestOpen.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var t=this,r=this.openArgs,n=arguments,o=r[0]||"GET",i=new URL(r[1],window.location.href);if(!e.shouldProtectRequest(i.host,o,i.pathname))return e.nativeXMLHttpRequestSend.apply(this,n);if(r.length>=3&&!r[2]){var a=e.fetchTokenFromLocal(i.host);return this.setRequestHeader(e.tokenHeaderName,a),e.nativeXMLHttpRequestSend.apply(this,n)}e.fetchToken(i.host).then((function(r){t.setRequestHeader(e.tokenHeaderName,r.value),e.nativeXMLHttpRequestSend.apply(t,n)}))}}},{key:"monkeyPatchFetch",value:function(){if(va){var e=this;window.fetch=function(t,r){var n,o,i=this;da&&t instanceof Request?(n=t.url,o=t.method):(n=t,o=r&&r.method?r.method:"GET");var a=new URL(n,window.location.href);return e.shouldProtectRequest(a.host,o,a.pathname)?e.fetchToken(a.host).then((function(n){if(da&&t instanceof Request)t.headers.set(e.tokenHeaderName,n.value);else if((r=r||{}).headers=r.headers||{},ya&&r.headers instanceof Headers)r.headers.set(e.tokenHeaderName,n.value);else if(Array.isArray(r.headers)){var o=!1;r.headers.forEach((function(t){t[0]===e.tokenHeaderName&&(t[1]=n.value,o=!0)})),o||r.headers.push([e.tokenHeaderName,n.value])}else r.headers[e.tokenHeaderName]=n.value;return e.nativeFetch.apply(i,[t,r])})):e.nativeFetch.apply(this,[t,r])}}}}]),e}());e.csrf=ma,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
